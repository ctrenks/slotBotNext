<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offer Code Tracking System - Documentation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #eee;
            background-color: #121212;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #4ADE80;
        }
        code {
            background-color: #1e1e1e;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace;
        }
        pre {
            background-color: #1e1e1e;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        a {
            color: #4ADE80;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .container {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Offer Code Tracking System</h1>
        <p>This document explains how the offer code tracking system works in the SlotBot application.</p>

        <h2>Overview</h2>
        <p>The system captures <code>offercode</code> parameters from URLs and associates them with users during registration. This allows for tracking different promotional offers and campaigns.</p>

        <h2>How It Works</h2>
        <ol>
            <li><strong>Capturing OfferCode</strong>: When a user visits the site with an <code>offercode</code> parameter in the URL (e.g., <code>/?offercode=BIGYEAR</code>), the system stores this value in localStorage.</li>
            <li><strong>Registration</strong>: During user registration/sign-in, the stored offercode is associated with the user's account in the database.</li>
            <li><strong>Analytics</strong>: The system tracks users with offer codes and provides statistics in the admin dashboard.</li>
        </ol>

        <h2>Admin Dashboard</h2>
        <p>Administrators can view offer code statistics in the admin dashboard:</p>
        <ol>
            <li>Navigate to <code>/admin/affiliate/stats</code></li>
            <li>View the number of users with offer codes</li>
            <li>View the conversion rate for users with offer codes</li>
        </ol>
    </div>

    <div class="container">
        <h2>Usage Examples</h2>
        <h3>Creating Promotional Links</h3>
        <p>Create promotional links with offercode parameters:</p>
        <pre><code>https://yourdomain.com/?offercode=BIGYEAR</code></pre>

        <h3>Tracking Offer Codes</h3>
        <p>You can track the effectiveness of different promotional offers by analyzing the statistics in the admin dashboard.</p>

        <h3>Combined Tracking</h3>
        <p>You can combine offer codes with affiliate tracking by including both parameters in the URL:</p>
        <pre><code>https://yourdomain.com/?clickid=AFFILIATE_ID_123&offercode=BIGYEAR</code></pre>
        <p>This allows you to track both the affiliate source and the specific promotional offer that brought in the user.</p>
    </div>

    <div class="container">
        <h2>Implementation Details</h2>
        <h3>Database Schema</h3>
        <p>The User model includes an <code>offerCode</code> field:</p>
        <pre><code>model User {
  // other fields...
  clickId       String?          // Tracking ID for affiliate postbacks
  offerCode     String?          // Promotional offer code
}</code></pre>
    </div>

    <div class="container">
        <p><a href="/admin/affiliate">&larr; Back to Affiliate Dashboard</a></p>
    </div>
</body>
</html>